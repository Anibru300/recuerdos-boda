<h2>Comparte tus fotos ğŸ’</h2>

<input type="text" id="nombre" placeholder="Tu nombre" required><br><br>
<input type="file" id="foto" accept="image/*" required><br><br>

<button onclick="subirFoto()">Subir foto</button>

<div id="mensaje"></div>

<script>
function subirFoto() {
  const fileInput = document.getElementById("foto");
  const nombre = document.getElementById("nombre").value;

  if (!fileInput.files.length) {
    alert("Selecciona una foto");
    return;
  }

  const reader = new FileReader();
  reader.onload = function () {
    const base64 = reader.result.split(",")[1];

    fetch("https://script.google.com/macros/s/AKfycbxceGalzLgfSGRIbOVTDIHDGr21uNHnjStttWY7ohzw_p55VjQrTwoD9OsHZsVFGmYEeQ/exec", {
      method: "POST",
      body: JSON.stringify({
        nombre: nombre,
        imagen: base64
      }),
      headers: {
        "Content-Type": "application/json"
      }
    })
    .then(r => r.json())
    .then(d => {
      document.getElementById("mensaje").innerText =
        d.ok ? "Foto subida correctamente âœ¨" : d.mensaje;
    });
  };

  reader.readAsDataURL(fileInput.files[0]);
}
</script>
